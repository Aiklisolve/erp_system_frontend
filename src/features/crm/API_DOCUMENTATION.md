# CRM Module API Documentation

This document provides API specifications with curl examples for all CRM module endpoints. The frontend expects these endpoints to be implemented in the backend.

**Base URL**: `https://your-api-domain.com/api/v1` (or your Supabase REST API URL)

**Authentication**: All requests require authentication token in the header:
```
Authorization: Bearer <your-auth-token>
```

---

## 1. Customers API

### 1.1 List All Customers

**Endpoint**: `GET /customers`

**Description**: Retrieves customers from the database. Supports pagination.

**Query Parameters**:
- `page` (optional): Page number (default: 1)
- `limit` (optional): Items per page (default: 20, max: 1000)

**cURL Request**:
```bash
# Get all customers (with high limit)
curl -X GET "https://your-api-domain.com/api/v1/customers?page=1&limit=1000" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"

# Get paginated customers
curl -X GET "https://your-api-domain.com/api/v1/customers?page=1&limit=20" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK) - Direct Array Format:
```json
[
  {
    "id": 1,
    "customer_number": "CUST-001",
    "name": "Acme Retail Co.",
    "email": "ops@acmeretail.example",
    "phone": "+1 555-1000",
    "segment": "Enterprise",
    "company_name": "Acme Retail Corporation",
    "industry": "Retail",
    "annual_revenue": 5000000.00,
    "employee_count": 250,
    "website": "https://www.acmeretail.com",
    "address": "123 Business Street",
    "city": "New York",
    "state": "NY",
    "country": "United States",
    "pincode": "10001",
    "gstin": "29ABCDE1234F1Z5",
    "pan_number": "ABCDE1234F",
    "contact_person": "John Doe",
    "contact_designation": "Operations Manager",
    "credit_limit": 100000.00,
    "payment_terms": "Net 30",
    "notes": "Preferred customer",
    "created_at": "2024-11-01T00:00:00.000Z",
    "updated_at": "2024-11-01T00:00:00.000Z"
  }
]
```

**Response** (200 OK) - Paginated Format:
```json
{
  "success": true,
  "data": {
    "customers": [
      {
        "id": "cust-1",
        "name": "Acme Retail Co.",
        "email": "ops@acmeretail.example",
        "phone": "+1 555-1000",
        "segment": "Enterprise",
        "created_at": "2024-11-01T00:00:00.000Z",
        "updated_at": "2024-11-01T00:00:00.000Z"
      }
    ],
    "pagination": {
      "current_page": 1,
      "total_pages": 5,
      "total_items": 100,
      "items_per_page": 20,
      "has_next": true,
      "has_prev": false
    }
  }
}
```

**Error Response** (500 Internal Server Error):
```json
{
  "error": "Database connection failed",
  "message": "Unable to fetch customers"
}
```

---

### 1.2 Create Customer

**Endpoint**: `POST /customers`

**Description**: Creates a new customer record.

**cURL Request**:
```bash
curl -X POST "https://your-api-domain.com/api/v1/customers" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Tech Solutions Inc.",
    "email": "contact@techsolutions.com",
    "phone": "+1 555-2000",
    "segment": "Enterprise",
    "company_name": "Tech Solutions Corporation",
    "industry": "Technology",
    "annual_revenue": 10000000.00,
    "employee_count": 500,
    "website": "https://www.techsolutions.com",
    "address": "456 Tech Avenue, Suite 100",
    "city": "San Francisco",
    "state": "CA",
    "country": "United States",
    "pincode": "94102",
    "gstin": "29XYZAB5678G2H6",
    "pan_number": "XYZAB5678G",
    "contact_person": "Jane Smith",
    "contact_designation": "Sales Director",
    "credit_limit": 500000.00,
    "payment_terms": "Net 45",
    "notes": "Key enterprise client"
  }'
```

**Note**: The `customer_number` field is auto-generated by the backend and should NOT be included in the request payload.

**Request Payload** (all fields except `name` are optional, `customer_number` is auto-generated by backend):
```json
{
  "name": "Tech Solutions Inc.",
  "email": "contact@techsolutions.com",
  "phone": "+1 555-2000",
  "segment": "Enterprise",
  "company_name": "Tech Solutions Corporation",
  "industry": "Technology",
  "annual_revenue": 10000000.00,
  "employee_count": 500,
  "website": "https://www.techsolutions.com",
  "address": "456 Tech Avenue, Suite 100",
  "city": "San Francisco",
  "state": "CA",
  "country": "United States",
  "pincode": "94102",
  "gstin": "29XYZAB5678G2H6",
  "pan_number": "XYZAB5678G",
  "contact_person": "Jane Smith",
  "contact_designation": "Sales Director",
  "credit_limit": 500000.00,
  "payment_terms": "Net 45",
  "notes": "Key enterprise client"
}
```

**Response** (201 Created):
```json
{
  "id": 2,
  "customer_number": "CUST-002",
  "name": "Tech Solutions Inc.",
  "email": "contact@techsolutions.com",
  "phone": "+1 555-2000",
  "segment": "Enterprise",
  "company_name": "Tech Solutions Corporation",
  "industry": "Technology",
  "annual_revenue": 10000000.00,
  "employee_count": 500,
  "website": "https://www.techsolutions.com",
  "address": "456 Tech Avenue, Suite 100",
  "city": "San Francisco",
  "state": "CA",
  "country": "United States",
  "pincode": "94102",
  "gstin": "29XYZAB5678G2H6",
  "pan_number": "XYZAB5678G",
  "contact_person": "Jane Smith",
  "contact_designation": "Sales Director",
  "credit_limit": 500000.00,
  "payment_terms": "Net 45",
  "notes": "Key enterprise client",
  "created_at": "2025-01-20T10:30:00.000Z",
  "updated_at": "2025-01-20T10:30:00.000Z"
}
```

**Error Response** (400 Bad Request):
```json
{
  "error": "Validation failed",
  "message": "Email is required and must be valid"
}
```

---

### 1.3 Update Customer

**Endpoint**: `PATCH /customers/:id`

**Description**: Updates an existing customer record.

**cURL Request**:
```bash
curl -X PATCH "https://your-api-domain.com/api/v1/customers/cust-1" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+1 555-1001",
    "segment": "Enterprise Plus"
  }'
```

**Request Payload** (all fields optional):
```json
{
  "name": "Updated Company Name",
  "email": "newemail@example.com",
  "phone": "+1 555-1001",
  "segment": "Enterprise Plus"
}
```

**Response** (200 OK):
```json
{
  "id": "cust-1",
  "name": "Acme Retail Co.",
  "email": "ops@acmeretail.example",
  "phone": "+1 555-1001",
  "segment": "Enterprise Plus",
  "created_at": "2024-11-01T00:00:00.000Z",
  "updated_at": "2025-01-20T11:00:00.000Z"
}
```

**Error Response** (404 Not Found):
```json
{
  "error": "Not found",
  "message": "Customer with id 'cust-1' not found"
}
```

---

### 1.4 Delete Customer

**Endpoint**: `DELETE /customers/:id`

**Description**: Deletes a customer record.

**cURL Request**:
```bash
curl -X DELETE "https://your-api-domain.com/api/v1/customers/cust-1" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK):
```json
{
  "message": "Customer deleted successfully"
}
```

**Error Response** (404 Not Found):
```json
{
  "error": "Not found",
  "message": "Customer with id 'cust-1' not found"
}
```

---

## 2. ERP Users API

### 2.1 List All ERP Users

**Endpoint**: `GET /erp-users`

**Description**: Retrieves all ERP users/employees from the database.

**cURL Request**:
```bash
curl -X GET "https://your-api-domain.com/api/v1/erp-users" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK):
```json
[
  {
    "id": "user-001",
    "employee_number": "EMP-2025-001",
    "username": "sarah.johnson",
    "email": "sarah.johnson@orbitrp.com",
    "first_name": "Sarah",
    "last_name": "Johnson",
    "full_name": "Sarah Johnson",
    "gender": "FEMALE",
    "age": 35,
    "mobile": "+1-555-1001",
    "work_phonenumber": "+1-555-1002",
    "address": "123 Business St, New York, NY",
    "role": "ADMIN",
    "designation": "System Administrator",
    "department": "IT",
    "employment_status": "ACTIVE",
    "joining_date": "2023-01-15",
    "manager_name": "CEO",
    "emergency_contact": "+1-555-1003",
    "is_active": true,
    "created_at": "2023-01-15T00:00:00.000Z",
    "updated_at": "2023-01-15T00:00:00.000Z"
  }
]
```

---

### 2.2 Create ERP User

**Endpoint**: `POST /erp-users`

**Description**: Creates a new ERP user/employee record.

**cURL Request**:
```bash
curl -X POST "https://your-api-domain.com/api/v1/erp-users" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "employee_number": "EMP-2025-004",
    "username": "john.doe",
    "email": "john.doe@orbitrp.com",
    "password": "SecurePassword123!",
    "first_name": "John",
    "last_name": "Doe",
    "mobile": "+1-555-4001",
    "role": "FINANCE_MANAGER",
    "employment_status": "ACTIVE",
    "department": "Finance",
    "designation": "Senior Finance Manager",
    "joining_date": "2025-01-20"
  }'
```

**Request Payload** (required fields: `employee_number`, `email`, `password`, `first_name`, `last_name`, `username`, `role`, `joining_date`):
```json
{
  "employee_number": "EMP-2025-004",
  "username": "john.doe",
  "email": "john.doe@orbitrp.com",
  "password": "SecurePassword123!",
  "mobile": "+1-555-4001",
  "first_name": "John",
  "last_name": "Doe",
  "gender": "MALE",
  "date_of_birth": "1990-05-15",
  "address": "789 Main St, Boston, MA",
  "city": "Boston",
  "state": "MA",
  "pincode": "02101",
  "role": "FINANCE_MANAGER",
  "employment_status": "ACTIVE",
  "joining_date": "2025-01-20",
  "designation": "Senior Finance Manager",
  "department": "Finance",
  "manager_name": "Mike Wilson",
  "work_phone": "+1-555-4002",
  "pan_number": "ABCDE1234F",
  "aadhar_number": "123456789012",
  "notes": "New hire"
}
```

**Note**: 
- Dates (`date_of_birth`, `joining_date`) should be sent in `YYYY-MM-DD` format
- `password` will be hashed by the backend (send as plain text)
- `password_hash` is read-only and should not be included in requests

**Response** (201 Created):
```json
{
  "id": 4,
  "employee_number": "EMP-2025-004",
  "username": "john.doe",
  "email": "john.doe@orbitrp.com",
  "password_hash": "$2b$10$...",
  "mobile": "+1-555-4001",
  "first_name": "John",
  "last_name": "Doe",
  "gender": "MALE",
  "date_of_birth": "1990-05-15",
  "address": "789 Main St, Boston, MA",
  "city": "Boston",
  "state": "MA",
  "pincode": "02101",
  "role": "FINANCE_MANAGER",
  "employment_status": "ACTIVE",
  "joining_date": "2025-01-20",
  "designation": "Senior Finance Manager",
  "department": "Finance",
  "manager_name": "Mike Wilson",
  "work_phone": "+1-555-4002",
  "pan_number": "ABCDE1234F",
  "aadhar_number": "123456789012",
  "notes": "New hire",
  "created_at": "2025-01-20T10:30:00.000Z",
  "updated_at": "2025-01-20T10:30:00.000Z"
}
```

**Note**: 
- `password` should NOT be returned in the response (only `password_hash`)
- Dates are returned in `YYYY-MM-DD` format

---

### 2.3 Update ERP User

**Endpoint**: `PATCH /erp-users/:id`

**Description**: Updates an existing ERP user record.

**cURL Request**:
```bash
curl -X PATCH "https://your-api-domain.com/api/v1/erp-users/user-001" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "department": "Engineering",
    "designation": "Senior System Administrator",
    "is_active": true
  }'
```

**Request Payload** (all fields optional):
```json
{
  "email": "newemail@orbitrp.com",
  "mobile": "+1-555-9999",
  "department": "Engineering",
  "designation": "Senior System Administrator",
  "employment_status": "ACTIVE",
  "is_active": true
}
```

**Response** (200 OK):
```json
{
  "id": "user-001",
  "employee_number": "EMP-2025-001",
  "username": "sarah.johnson",
  "email": "sarah.johnson@orbitrp.com",
  "first_name": "Sarah",
  "last_name": "Johnson",
  "full_name": "Sarah Johnson",
  "gender": "FEMALE",
  "age": 35,
  "mobile": "+1-555-9999",
  "work_phonenumber": "+1-555-1002",
  "address": "123 Business St, New York, NY",
  "role": "ADMIN",
  "designation": "Senior System Administrator",
  "department": "Engineering",
  "employment_status": "ACTIVE",
  "joining_date": "2023-01-15",
  "manager_name": "CEO",
  "emergency_contact": "+1-555-1003",
  "is_active": true,
  "created_at": "2023-01-15T00:00:00.000Z",
  "updated_at": "2025-01-20T11:00:00.000Z"
}
```

---

### 2.4 Delete ERP User

**Endpoint**: `DELETE /erp-users/:id`

**Description**: Deletes an ERP user record.

**cURL Request**:
```bash
curl -X DELETE "https://your-api-domain.com/api/v1/erp-users/user-001" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK):
```json
{
  "message": "ERP user deleted successfully"
}
```

---

## 3. Leave Management API

### 3.1 List All Leaves

**Endpoint**: `GET /leaves`

**Description**: Retrieves all employee leave records.

**cURL Request**:
```bash
curl -X GET "https://your-api-domain.com/api/v1/leaves" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK):
```json
[
  {
    "id": "leave-001",
    "leave_number": "LV-2025-001",
    "employee_id": "user-002",
    "employee_number": "EMP-2025-002",
    "employee_name": "Mike Wilson",
    "employee_email": "mike.wilson@orbitrp.com",
    "employee_role": "FINANCE_MANAGER",
    "leave_type": "ANNUAL_LEAVE",
    "start_date": "2025-02-10",
    "end_date": "2025-02-14",
    "total_days": 5,
    "reason": "Family vacation",
    "status": "APPROVED",
    "applied_date": "2025-01-15",
    "approved_by": "Sarah Johnson",
    "approved_by_id": "user-001",
    "approved_date": "2025-01-16",
    "emergency_contact_name": "Lisa Wilson",
    "emergency_contact_phone": "+1-555-2003",
    "created_at": "2025-01-15T00:00:00.000Z",
    "updated_at": "2025-01-16T00:00:00.000Z"
  }
]
```

---

### 3.2 Create Leave

**Endpoint**: `POST /leaves`

**Description**: Creates a new leave application.

**cURL Request**:
```bash
curl -X POST "https://your-api-domain.com/api/v1/leaves" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "leave_number": "LV-2025-004",
    "employee_id": "user-003",
    "employee_number": "EMP-2025-003",
    "employee_name": "Lisa Anderson",
    "employee_email": "lisa.anderson@orbitrp.com",
    "employee_role": "INVENTORY_MANAGER",
    "leave_type": "CASUAL_LEAVE",
    "start_date": "2025-02-01",
    "end_date": "2025-02-01",
    "total_days": 1,
    "reason": "Personal appointment",
    "status": "PENDING",
    "applied_date": "2025-01-20",
    "emergency_contact_name": "Tom Anderson",
    "emergency_contact_phone": "+1-555-3002"
  }'
```

**Request Payload**:
```json
{
  "leave_number": "LV-2025-004",
  "employee_id": "user-003",
  "employee_number": "EMP-2025-003",
  "employee_name": "Lisa Anderson",
  "employee_email": "lisa.anderson@orbitrp.com",
  "employee_role": "INVENTORY_MANAGER",
  "leave_type": "CASUAL_LEAVE",
  "start_date": "2025-02-01",
  "end_date": "2025-02-01",
  "total_days": 1,
  "reason": "Personal appointment",
  "status": "PENDING",
  "applied_date": "2025-01-20",
  "emergency_contact_name": "Tom Anderson",
  "emergency_contact_phone": "+1-555-3002",
  "notes": "Morning appointment"
}
```

**Response** (201 Created):
```json
{
  "id": "leave-004",
  "leave_number": "LV-2025-004",
  "employee_id": "user-003",
  "employee_number": "EMP-2025-003",
  "employee_name": "Lisa Anderson",
  "employee_email": "lisa.anderson@orbitrp.com",
  "employee_role": "INVENTORY_MANAGER",
  "leave_type": "CASUAL_LEAVE",
  "start_date": "2025-02-01",
  "end_date": "2025-02-01",
  "total_days": 1,
  "reason": "Personal appointment",
  "status": "PENDING",
  "applied_date": "2025-01-20",
  "emergency_contact_name": "Tom Anderson",
  "emergency_contact_phone": "+1-555-3002",
  "notes": "Morning appointment",
  "created_at": "2025-01-20T10:30:00.000Z",
  "updated_at": "2025-01-20T10:30:00.000Z"
}
```

---

### 3.3 Update Leave

**Endpoint**: `PATCH /leaves/:id`

**Description**: Updates a leave record (e.g., approve/reject).

**cURL Request** (Approve Leave):
```bash
curl -X PATCH "https://your-api-domain.com/api/v1/leaves/leave-002" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "APPROVED",
    "approved_by": "Sarah Johnson",
    "approved_by_id": "user-001",
    "approved_date": "2025-01-19"
  }'
```

**Request Payload** (Approve):
```json
{
  "status": "APPROVED",
  "approved_by": "Sarah Johnson",
  "approved_by_id": "user-001",
  "approved_date": "2025-01-19"
}
```

**Request Payload** (Reject):
```json
{
  "status": "REJECTED",
  "rejected_by": "Sarah Johnson",
  "rejected_by_id": "user-001",
  "rejected_date": "2025-01-19",
  "rejection_reason": "Insufficient leave balance"
}
```

**Response** (200 OK):
```json
{
  "id": "leave-002",
  "leave_number": "LV-2025-002",
  "employee_id": "user-003",
  "employee_number": "EMP-2025-003",
  "employee_name": "Lisa Anderson",
  "employee_email": "lisa.anderson@orbitrp.com",
  "employee_role": "INVENTORY_MANAGER",
  "leave_type": "SICK_LEAVE",
  "start_date": "2025-01-20",
  "end_date": "2025-01-22",
  "total_days": 3,
  "reason": "Medical appointment and recovery",
  "status": "APPROVED",
  "applied_date": "2025-01-18",
  "approved_by": "Sarah Johnson",
  "approved_by_id": "user-001",
  "approved_date": "2025-01-19",
  "emergency_contact_name": "Tom Anderson",
  "emergency_contact_phone": "+1-555-3002",
  "notes": "Doctor appointment on 20th, recovery days 21st-22nd",
  "created_at": "2025-01-18T00:00:00.000Z",
  "updated_at": "2025-01-19T00:00:00.000Z"
}
```

---

### 3.4 Delete Leave

**Endpoint**: `DELETE /leaves/:id`

**Description**: Deletes a leave record.

**cURL Request**:
```bash
curl -X DELETE "https://your-api-domain.com/api/v1/leaves/leave-001" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK):
```json
{
  "message": "Leave record deleted successfully"
}
```

---

## 4. Task Management API

### 4.1 List All Tasks

**Endpoint**: `GET /tasks`

**Description**: Retrieves all task records.

**cURL Request**:
```bash
curl -X GET "https://your-api-domain.com/api/v1/tasks" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK):
```json
[
  {
    "id": "task-001",
    "task_number": "TSK-2025-001",
    "title": "Update Finance Module Documentation",
    "description": "Review and update the Finance module documentation with new features and workflows",
    "task_type": "DOCUMENTATION",
    "priority": "MEDIUM",
    "status": "IN_PROGRESS",
    "assigned_to_id": "user-002",
    "assigned_to_name": "Mike Wilson",
    "assigned_to_email": "mike.wilson@orbitrp.com",
    "assigned_to_role": "FINANCE_MANAGER",
    "assigned_by": "Sarah Johnson",
    "assigned_by_id": "user-001",
    "assigned_date": "2025-01-10",
    "start_date": "2025-01-10",
    "due_date": "2025-01-25",
    "progress_percentage": 60,
    "estimated_hours": 16,
    "actual_hours": 10,
    "tags": ["documentation", "finance"],
    "notes": "Focus on new transaction approval workflow",
    "created_at": "2025-01-10T00:00:00.000Z",
    "updated_at": "2025-01-15T00:00:00.000Z"
  }
]
```

---

### 4.2 Create Task

**Endpoint**: `POST /tasks`

**Description**: Creates a new task.

**cURL Request**:
```bash
curl -X POST "https://your-api-domain.com/api/v1/tasks" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "task_number": "TSK-2025-004",
    "title": "Implement User Authentication",
    "description": "Add JWT-based authentication to the API",
    "task_type": "FEATURE",
    "priority": "HIGH",
    "status": "NEW",
    "assigned_to_id": "user-001",
    "assigned_to_name": "Sarah Johnson",
    "assigned_to_email": "sarah.johnson@orbitrp.com",
    "assigned_to_role": "ADMIN",
    "assigned_by": "CEO",
    "assigned_by_id": "user-000",
    "assigned_date": "2025-01-20",
    "start_date": "2025-01-21",
    "due_date": "2025-02-05",
    "progress_percentage": 0,
    "estimated_hours": 40,
    "tags": ["feature", "security", "authentication"]
  }'
```

**Request Payload**:
```json
{
  "task_number": "TSK-2025-004",
  "title": "Implement User Authentication",
  "description": "Add JWT-based authentication to the API",
  "task_type": "FEATURE",
  "priority": "HIGH",
  "status": "NEW",
  "assigned_to_id": "user-001",
  "assigned_to_name": "Sarah Johnson",
  "assigned_to_email": "sarah.johnson@orbitrp.com",
  "assigned_to_role": "ADMIN",
  "assigned_by": "CEO",
  "assigned_by_id": "user-000",
  "assigned_date": "2025-01-20",
  "start_date": "2025-01-21",
  "due_date": "2025-02-05",
  "progress_percentage": 0,
  "estimated_hours": 40,
  "actual_hours": 0,
  "tags": ["feature", "security", "authentication"],
  "notes": "Use industry-standard JWT tokens"
}
```

**Response** (201 Created):
```json
{
  "id": "task-004",
  "task_number": "TSK-2025-004",
  "title": "Implement User Authentication",
  "description": "Add JWT-based authentication to the API",
  "task_type": "FEATURE",
  "priority": "HIGH",
  "status": "NEW",
  "assigned_to_id": "user-001",
  "assigned_to_name": "Sarah Johnson",
  "assigned_to_email": "sarah.johnson@orbitrp.com",
  "assigned_to_role": "ADMIN",
  "assigned_by": "CEO",
  "assigned_by_id": "user-000",
  "assigned_date": "2025-01-20",
  "start_date": "2025-01-21",
  "due_date": "2025-02-05",
  "progress_percentage": 0,
  "estimated_hours": 40,
  "actual_hours": 0,
  "tags": ["feature", "security", "authentication"],
  "notes": "Use industry-standard JWT tokens",
  "created_at": "2025-01-20T10:30:00.000Z",
  "updated_at": "2025-01-20T10:30:00.000Z"
}
```

---

### 4.3 Update Task

**Endpoint**: `PATCH /tasks/:id`

**Description**: Updates a task record.

**cURL Request**:
```bash
curl -X PATCH "https://your-api-domain.com/api/v1/tasks/task-001" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "COMPLETED",
    "progress_percentage": 100,
    "completed_date": "2025-01-20",
    "actual_hours": 15
  }'
```

**Request Payload** (all fields optional):
```json
{
  "status": "COMPLETED",
  "progress_percentage": 100,
  "completed_date": "2025-01-20",
  "actual_hours": 15,
  "notes": "Task completed successfully"
}
```

**Response** (200 OK):
```json
{
  "id": "task-001",
  "task_number": "TSK-2025-001",
  "title": "Update Finance Module Documentation",
  "description": "Review and update the Finance module documentation with new features and workflows",
  "task_type": "DOCUMENTATION",
  "priority": "MEDIUM",
  "status": "COMPLETED",
  "assigned_to_id": "user-002",
  "assigned_to_name": "Mike Wilson",
  "assigned_to_email": "mike.wilson@orbitrp.com",
  "assigned_to_role": "FINANCE_MANAGER",
  "assigned_by": "Sarah Johnson",
  "assigned_by_id": "user-001",
  "assigned_date": "2025-01-10",
  "start_date": "2025-01-10",
  "due_date": "2025-01-25",
  "completed_date": "2025-01-20",
  "progress_percentage": 100,
  "estimated_hours": 16,
  "actual_hours": 15,
  "tags": ["documentation", "finance"],
  "notes": "Task completed successfully",
  "created_at": "2025-01-10T00:00:00.000Z",
  "updated_at": "2025-01-20T11:00:00.000Z"
}
```

---

### 4.4 Delete Task

**Endpoint**: `DELETE /tasks/:id`

**Description**: Deletes a task record.

**cURL Request**:
```bash
curl -X DELETE "https://your-api-domain.com/api/v1/tasks/task-001" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json"
```

**Response** (200 OK):
```json
{
  "message": "Task deleted successfully"
}
```

---

## Common Error Responses

### 400 Bad Request
```json
{
  "error": "Validation failed",
  "message": "Invalid input data",
  "details": {
    "email": "Email is required",
    "phone": "Phone number format is invalid"
  }
}
```

### 401 Unauthorized
```json
{
  "error": "Unauthorized",
  "message": "Authentication token is missing or invalid"
}
```

### 403 Forbidden
```json
{
  "error": "Forbidden",
  "message": "You do not have permission to perform this action"
}
```

### 404 Not Found
```json
{
  "error": "Not found",
  "message": "Resource with id 'xxx' not found"
}
```

### 500 Internal Server Error
```json
{
  "error": "Internal server error",
  "message": "An unexpected error occurred"
}
```

---

## Data Types Reference

### Customer
- `id`: number (bigint, auto-generated, required)
- `customer_number`: string (varchar 50, auto-generated by backend, read-only - do not include in create requests)
- `name`: string (varchar 255, required)
- `email`: string (varchar 255, optional, valid email format)
- `phone`: string (varchar 20, optional)
- `segment`: string (varchar 50, optional)
- `company_name`: string (varchar 255, optional)
- `industry`: string (varchar 100, optional)
- `annual_revenue`: number (numeric 15,2, optional)
- `employee_count`: number (integer, optional)
- `website`: string (varchar 255, optional, valid URL format)
- `address`: string (text, optional)
- `city`: string (varchar 100, optional)
- `state`: string (varchar 100, optional)
- `country`: string (varchar 100, optional)
- `pincode`: string (varchar 10, optional)
- `gstin`: string (varchar 20, optional)
- `pan_number`: string (varchar 20, optional)
- `contact_person`: string (varchar 255, optional)
- `contact_designation`: string (varchar 100, optional)
- `credit_limit`: number (numeric 15,2, optional)
- `payment_terms`: string (varchar 100, optional)
- `notes`: string (text, optional)
- `created_at`: string (ISO 8601 datetime)
- `updated_at`: string (ISO 8601 datetime)

### ERP User Roles
`ADMIN` | `FINANCE_MANAGER` | `INVENTORY_MANAGER` | `PROCUREMENT_OFFICER` | `HR_MANAGER` | `SALES_MANAGER` | `WAREHOUSE_OPERATOR` | `VIEWER` | `EMPLOYEE`

### Employment Status
`ACTIVE` | `INACTIVE` | `ON_LEAVE` | `TERMINATED`

### Leave Types
`SICK_LEAVE` | `CASUAL_LEAVE` | `ANNUAL_LEAVE` | `MATERNITY_LEAVE` | `PATERNITY_LEAVE` | `UNPAID_LEAVE` | `COMP_OFF` | `OTHER`

### Leave Status
`PENDING` | `APPROVED` | `REJECTED` | `CANCELLED`

### Task Types
`BUG` | `FEATURE` | `SUPPORT` | `MAINTENANCE` | `DOCUMENTATION` | `RESEARCH` | `OTHER`

### Task Priority
`LOW` | `MEDIUM` | `HIGH` | `URGENT`

### Task Status
`NEW` | `IN_PROGRESS` | `COMPLETED` | `ON_HOLD` | `CANCELLED`

---

## Notes

1. All date fields should be in ISO 8601 format: `YYYY-MM-DD` or `YYYY-MM-DDTHH:mm:ss.sssZ`
2. All IDs should be strings (UUIDs recommended for production)
3. Arrays should be returned as JSON arrays, not comma-separated strings
4. Boolean values should be actual booleans (`true`/`false`), not strings
5. Null values should be returned as `null`, not empty strings or omitted
6. Password fields should NEVER be returned in responses
7. All timestamps (`created_at`, `updated_at`) should be automatically managed by the backend

